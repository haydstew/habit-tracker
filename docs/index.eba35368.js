var e=globalThis,t={},r={},n=e.parcelRequire94c2;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},e.parcelRequire94c2=n),n.register;var a=n("47Mwn"),i=n("6AR8M");const o=document.getElementById("register"),l=document.getElementById("signIn"),c=document.getElementById("toggleForm"),d=document.getElementById("formTitle"),s=document.getElementById("actionButton"),u=document.getElementById("toggleLink");let g=!1;async function m(){let e=document.getElementById("email").value,t=document.getElementById("password").value;if(""==e||""==t){alert("Email and password are required.");return}try{await (0,i.createUserWithEmailAndPassword)(a.auth,e,t);let r={challenge:new Uint8Array(32),rp:{name:"Habit Tracker"},user:{id:new TextEncoder().encode(e),name:e,displayName:"User"},pubKeyCredParams:[{type:"public-key",alg:-7}],authenticatorSelection:{userVerification:"required"},timeout:6e4,attestation:"direct"},n=await navigator.credentials.create({publicKey:r}),o=btoa(String.fromCharCode(...new Uint8Array(n.rawId)));localStorage.setItem("biometricKey",JSON.stringify({id:o,email:e})),alert("Biometric registration successful!")}catch(e){console.error("Registration failed:",e),alert("Error during registration. Try again.")}}async function y(){let e=document.getElementById("email").value,t=document.getElementById("password").value;if(""==e||""==t){alert("Email and password are required.");return}let r=JSON.parse(localStorage.getItem("biometricKey"));if(!r){alert("No biometric data found. Please register first.");return}try{let e={challenge:new Uint8Array(32),allowCredentials:[{id:function(e){let t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(r),a=new Uint8Array(n.length);for(let e=0;e<n.length;++e)a[e]=n.charCodeAt(e);return a}(r.id),type:"public-key"}],userVerification:"required",timeout:6e4};await navigator.credentials.get({publicKey:e}),await (0,i.signInWithEmailAndPassword)(a.auth,r.email,t),localStorage.setItem("authenticatedUser",JSON.stringify(!0)),alert("Authentication successful!"),window.location.href="habits.html"}catch(e){console.error("Authentication failed:",e),alert("Authentication failed. Try again.")}}c.addEventListener("click",e=>{e.preventDefault(),(g=!g)?(d.textContent="Register",s.textContent="Register",u.innerHTML='Already have an account? <a href="#" id="toggleForm">Sign In here</a>'):(d.textContent="Sign In",s.textContent="Sign In",u.innerHTML='Don\'t have an account? <a href="#" id="toggleForm">Register here</a>')}),o.addEventListener("click",m),l.addEventListener("click",y);
//# sourceMappingURL=index.eba35368.js.map
