var e=globalThis,t={},r={},a=e.parcelRequire94c2;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in r){var a=r[e];delete r[e];var i={id:e,exports:{}};return t[e]=i,a.call(i.exports,i,i.exports),i.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){r[e]=t},e.parcelRequire94c2=a),a.register;var i=a("47Mwn"),n=a("6AR8M");const l=document.getElementById("email").value,o=document.getElementById("password").value,c=document.getElementById("register"),s=document.getElementById("signIn");async function d(){if(!l||!o){alert("Email and password are required.");return}try{await (0,n.createUserWithEmailAndPassword)(i.auth,l,o);let e={challenge:new Uint8Array(32),rp:{name:"Habit Tracker"},user:{id:new TextEncoder().encode(l),name:l,displayName:"User"},pubKeyCredParams:[{type:"public-key",alg:-7}],authenticatorSelection:{userVerification:"required"},timeout:6e4,attestation:"direct"},t=await navigator.credentials.create({publicKey:e}),r=btoa(String.fromCharCode(...new Uint8Array(t.rawId)));localStorage.setItem("biometricKey",JSON.stringify({id:r,email:l})),alert("Biometric registration successful!")}catch(e){console.error("Registration failed:",e),alert("Error during registration. Try again.")}}async function u(){if(!l||!o){alert("Email and password are required.");return}let e=JSON.parse(localStorage.getItem("biometricKey"));if(!e){alert("No biometric data found. Please register first.");return}try{let t={challenge:new Uint8Array(32),allowCredentials:[{id:function(e){let t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/-/g,"+").replace(/_/g,"/"),a=window.atob(r),i=new Uint8Array(a.length);for(let e=0;e<a.length;++e)i[e]=a.charCodeAt(e);return i}(e.id),type:"public-key"}],userVerification:"required",timeout:6e4};await navigator.credentials.get({publicKey:t}),await (0,n.signInWithEmailAndPassword)(i.auth,e.email,o),localStorage.setItem("authenticatedUser",JSON.stringify(!0)),alert("Authentication successful!"),window.location.href="habits.html"}catch(e){console.error("Authentication failed:",e),alert("Authentication failed. Try again.")}}c.addEventListener("click",d),s.addEventListener("click",u);
//# sourceMappingURL=index.6fbba409.js.map
