var e=globalThis,t={},r={},a=e.parcelRequire94c2;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in r){var a=r[e];delete r[e];var i={id:e,exports:{}};return t[e]=i,a.call(i.exports,i,i.exports),i.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){r[e]=t},e.parcelRequire94c2=a),a.register;var i=a("47Mwn"),n=a("6AR8M");const l=document.getElementById("register"),o=document.getElementById("signIn");async function c(){let e=document.getElementById("email").value,t=document.getElementById("password").value;if(""==e||""==t){alert("Email and password are required.");return}try{await (0,n.createUserWithEmailAndPassword)(i.auth,e,t);let r={challenge:new Uint8Array(32),rp:{name:"Habit Tracker"},user:{id:new TextEncoder().encode(e),name:e,displayName:"User"},pubKeyCredParams:[{type:"public-key",alg:-7}],authenticatorSelection:{userVerification:"required"},timeout:6e4,attestation:"direct"},a=await navigator.credentials.create({publicKey:r}),l=btoa(String.fromCharCode(...new Uint8Array(a.rawId)));localStorage.setItem("biometricKey",JSON.stringify({id:l,email:e})),alert("Biometric registration successful!")}catch(e){console.error("Registration failed:",e),alert("Error during registration. Try again.")}}async function s(){let e=document.getElementById("email").value,t=document.getElementById("password").value;if(""==e||""==t){alert("Email and password are required.");return}let r=JSON.parse(localStorage.getItem("biometricKey"));if(!r){alert("No biometric data found. Please register first.");return}try{let e={challenge:new Uint8Array(32),allowCredentials:[{id:function(e){let t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/-/g,"+").replace(/_/g,"/"),a=window.atob(r),i=new Uint8Array(a.length);for(let e=0;e<a.length;++e)i[e]=a.charCodeAt(e);return i}(r.id),type:"public-key"}],userVerification:"required",timeout:6e4};await navigator.credentials.get({publicKey:e}),await (0,n.signInWithEmailAndPassword)(i.auth,r.email,t),localStorage.setItem("authenticatedUser",JSON.stringify(!0)),alert("Authentication successful!"),window.location.href="habits.html"}catch(e){console.error("Authentication failed:",e),alert("Authentication failed. Try again.")}}l.addEventListener("click",c),o.addEventListener("click",s);
//# sourceMappingURL=index.061db3c1.js.map
