var e=globalThis,t={},r={},a=e.parcelRequire94c2;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in r){var a=r[e];delete r[e];var n={id:e,exports:{}};return t[e]=n,a.call(n.exports,n,n.exports),n.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},e.parcelRequire94c2=a),a.register;var n=a("47Mwn"),i=a("6AR8M");const l=document.querySelector(".toggle-form-link"),o=document.getElementById("formTitle"),c=document.getElementById("actionButton"),d=document.getElementById("toggleLink");let s=!1;async function u(){let e=document.getElementById("email").value.trim(),t=document.getElementById("password").value.trim();if(""===e||""===t){alert("Please enter a valid email address and password.");return}try{await (0,i.createUserWithEmailAndPassword)(n.auth,e,t);let r={challenge:new Uint8Array(32),rp:{name:"Habit Tracker"},user:{id:new TextEncoder().encode(e),name:e,displayName:"User"},pubKeyCredParams:[{type:"public-key",alg:-7}],authenticatorSelection:{userVerification:"required"},timeout:6e4,attestation:"direct"},a=await navigator.credentials.create({publicKey:r}),l=btoa(String.fromCharCode(...new Uint8Array(a.rawId)));localStorage.setItem("biometricKey",JSON.stringify({id:l,email:e})),alert("You have registered successfully! You can now sign into your account.")}catch(e){console.error("Registration failed:",e),alert("Error during registration. Try again.")}}async function g(){let e=document.getElementById("email").value.trim(),t=document.getElementById("password").value.trim();if(""===e||""===t){alert("Please enter a valid email address and password.");return}let r=JSON.parse(localStorage.getItem("biometricKey"));if(!r){alert("No biometric data found. Please register first.");return}try{let e={challenge:new Uint8Array(32),allowCredentials:[{id:function(e){let t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/-/g,"+").replace(/_/g,"/"),a=window.atob(r),n=new Uint8Array(a.length);for(let e=0;e<a.length;++e)n[e]=a.charCodeAt(e);return n}(r.id),type:"public-key"}],userVerification:"required",timeout:6e4};await navigator.credentials.get({publicKey:e}),await (0,i.signInWithEmailAndPassword)(n.auth,r.email,t),localStorage.setItem("authenticatedUser",JSON.stringify(!0)),window.location.href="habits.html"}catch(e){console.error("Authentication failed:",e),alert("Authentication failed. Please try again.")}}c.addEventListener("click",()=>{s?u():g()}),l.addEventListener("click",function e(t){t.preventDefault(),(s=!s)?(o.textContent="Register",c.textContent="Register",d.innerHTML='Already have an account? <a href="#" class="toggle-form-link">Sign in here</a>'):(o.textContent="Sign In",c.textContent="Sign In",d.innerHTML='Don\'t have an account? <a href="#" class="toggle-form-link">Register here</a>'),document.querySelector(".toggle-form-link").addEventListener("click",e)});
//# sourceMappingURL=index.d0230324.js.map
