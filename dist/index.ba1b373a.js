var e=globalThis,r={},t={},i=e.parcelRequire94c2;null==i&&((i=function(e){if(e in r)return r[e].exports;if(e in t){var i=t[e];delete t[e];var a={id:e,exports:{}};return r[e]=a,i.call(a.exports,a,a.exports),a.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,r){t[e]=r},e.parcelRequire94c2=i),(0,i.register)("27Lyk",function(e,r){Object.defineProperty(e.exports,"register",{get:()=>t,set:e=>t=e,enumerable:!0,configurable:!0});var t,i=new Map;t=function(e,r){for(var t=0;t<r.length-1;t+=2)i.set(r[t],{baseUrl:e,path:r[t+1]})}}),i("27Lyk").register(new URL("",import.meta.url).toString(),JSON.parse('["cRYo7","index.ba1b373a.js","i2oIM","service-worker.3536b1c5.js"]'));var a={};a=new URL("service-worker.3536b1c5.js",import.meta.url).toString();const n=new URL(a);async function o(){let e=prompt("Enter your email for registration:");if(!e){alert("Email is required for biometric registration.");return}let r={challenge:new Uint8Array(32),rp:{name:"Habit Tracker"},user:{id:new TextEncoder().encode(e),name:e,displayName:"User"},pubKeyCredParams:[{type:"public-key",alg:-7}],authenticatorSelection:{userVerification:"required"},timeout:6e4,attestation:"direct"};try{let t=await navigator.credentials.create({publicKey:r});sessionStorage.setItem("biometricKey",JSON.stringify({id:t.id,email:e})),localStorage.setItem("email",JSON.stringify(e)),alert("Biometric registration successful!")}catch(e){console.error("Biometric registration failed:",e),alert("Biometric registration failed. Try again.")}}async function c(){let e=JSON.parse(sessionStorage.getItem("biometricKey"));if(!e){alert("No biometric data found. Please register first.");return}let r={challenge:new Uint8Array(32),allowCredentials:[{id:new TextEncoder().encode(e.id),type:"public-key"}],userVerification:"required",timeout:6e4};try{let e=await navigator.credentials.get({publicKey:r});sessionStorage.setItem("authenticatedUser",JSON.stringify(e)),alert("Authentication successful!"),window.location.href="habits.html"}catch(e){console.error("Authentication failed:",e),alert("Authentication failed. Try again.")}}"serviceWorker"in navigator&&navigator.serviceWorker.register(n.href,{scope:"/habit-tracker/"}).then(()=>console.log("Service Worker Registered for scope:",n.href)).catch(e=>console.error("Service Worker Error:",e)),document.getElementById("registerBiometric").addEventListener("click",o),document.getElementById("signIn").addEventListener("click",c);
//# sourceMappingURL=index.ba1b373a.js.map
